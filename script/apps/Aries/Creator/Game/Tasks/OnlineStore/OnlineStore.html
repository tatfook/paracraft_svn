<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<pe:mcml>
<script type="text/npl" src="OnlineStore.lua" refresh="true">
<![CDATA[
NPL.load("(gl)script/apps/Aries/Creator/Game/NplBrowser/NplBrowserLoaderPage.lua");
NplBrowserLoaderPage = commonlib.gettable("NplBrowser.NplBrowserLoaderPage");

block_types = commonlib.gettable("MyCompany.Aries.Game.block_types");
OnlineStore = commonlib.gettable("MyCompany.Aries.Game.Tasks.OnlineStore");
OnlineStore.InitPage(Page);
task = OnlineStore.GetInstance();
]]>
</script>
<aries:window mode="thin" title='<%=L"元件库"%>' onclose="OnlineStore.OnClose">
    <div width="100%" height="100%">
        <pe:if condition="<%= System.os.GetPlatform() ~= 'win32'%>">
            <div style="position:relative;margin:20px" class="default"><%=L"正在加载内置浏览器， 首次加载会比较慢，请耐心等待"%></div>
            <pe:nplbrowser name="nplbrowser_store" enabledResize="true"  min_width="600" url="<%=OnlineStore.GetOnlineStoreUrl()%>" style="background:url();"/>
        </pe:if>
        <pe:if condition="<%= System.os.GetPlatform() == 'win32'%>">
            <pe:if condition="<%= NplBrowserLoaderPage.IsLoaded()%>" >
                <div style="position:relative;margin:20px" class="default"><%=L"正在加载内置浏览器， 首次加载会比较慢，请耐心等待"%></div>
                <pe:nplbrowser name="nplbrowser_store" enabledResize="true"  min_width="600" url="<%=OnlineStore.GetOnlineStoreUrl()%>" style="background:url();"/>
            </pe:if>
            <pe:if condition="<%=not NplBrowserLoaderPage.IsLoaded()%>" >
                <%=L"你没有安装内置浏览器，正在为您安装， 请稍后。 你可以用外部浏览器访问。" %>
            </pe:if>
        </pe:if>
    </div>
</aries:window>
</pe:mcml>
</html>

