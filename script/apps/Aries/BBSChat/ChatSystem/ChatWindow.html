<!-- "script/apps/Aries/BBSChat/ChatSystem/ChatWindow.html" -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>ChatWndow, by zrf, 2011/3/9</title>
</head>
<body>
<pe:mcml>
<script type="text/npl" ><![CDATA[
local page = document:GetPageCtrl();
MyCompany.Aries.ChatSystem.ChatWindow.Init();

function OnSwitchChannelDisplay(name, tabitem_mcmlNode)
    if(false) then
        -- Click to change display
        MyCompany.Aries.ChatSystem.ChatWindow.OnSwitchChannelDisplay(name);
    else
        -- Click to change input
        MyCompany.Aries.ChatSystem.ChatWindow.OnSwitchChannelDisplay(name);
        if(name == "0") then
            name = "1"; -- click 0 channels will write to all.
        end
        MyCompany.Aries.ChatSystem.ChatEdit.OnClickChannel(name, tabitem_mcmlNode:GetAttribute("text"));
    end
end
]]></script>
<div>
    <div width="100%" style="height:49px;">
        <div style="position:relative;width:420px;">
            <pe:custom id="1" oncreate="MyCompany.Aries.ChatSystem.ChatWindow.CreateBroadTreeView" style="margin-left:16px;height:47px;" />
        </div>
    </div>
    <pe:container name="canvas" ClickThrough="true" style="position:relative;margin:0px;padding:0px;background:" zorder="-1">
        <div width="100%" height="100%" style="margin-top:2px;margin-bottom:24px;background-color:#ffffffff;background:url(Texture/Aries/ChatSystem/bg3_32bits.png: 6 6 6 6);">
            <div style="margin-top:0px;">
                <pe:custom oncreate="MyCompany.Aries.ChatSystem.ChatWindow.CreateDragger()" style="width:16px;height:16px;background:url(Texture/Aries/Common/Teen/chat/move_32bits.png);" />
            </div>
            <div style="margin-top:-1px;margin-bottom:16px;" height="100%">
                <pe:custom oncreate="MyCompany.Aries.ChatSystem.ChatWindow.CreateTreeViewScrollBar()" style="width:16px;" />
            </div>
            <div style="margin-top:-16px;">
                <input type="button" tooltip="切换窗口大小" onclick="MyCompany.Aries.ChatSystem.ChatWindow.ToggleChatWindowSize()" style="width:16px;height:16px;margin-top:0px;background:url(Texture/Aries/Common/Teen/chat/resizer_32bits.png);" />
            </div>
        </div>
        <div style="margin-top:-23px;">
            <div style="position:relative;margin-top:-2px;">
                <input type="button" name="minimize" tooltip="最小化聊天窗口" onclick="MyCompany.Aries.ChatSystem.ChatWindow.OnClickWndMinimize" style="width:16px;height:17px;background:url(Texture/Aries/ChatSystem/kids/min_32bits.png#0 0 16 17);" />    
            </div>
            <div style="margin-left:10px;margin-top:0px;">
                <pe:tabs name="tabChannel" onclick="OnSwitchChannelDisplay" 
                    SelectedMenuItemBG="Texture/Aries/Common/ThemeKid/tab_selected_32bits.png;0 0 32 19: 6 6 6 6" UnSelectedMenuItemBG="Texture/Aries/Common/ThemeKid/tab_unselected_32bits.png;0 0 32 18: 6 6 6 6" 
                    style="height:20px;background:;padding-top:20px;padding-left:10px;" TextOffsetY="-1" TextColor="#204653" SelectedTextColor="#204653" 
                    ItemSpacing="2" DefaultIconSize = "8"  TextFont="System;12;norm" >
                    <pe:tab-item name="0" text="综合" selected="true" width="36" height="18" />
                    <!--<pe:tab-item name="1" text="附近" selected="true" width="36" height="18"/>-->
                    <pe:tab-item name="2" text="队伍" width="36" height="18"/>
                    <pe:tab-item name="3" text="单聊" width="36" height="18"/>
                    <pe:tab-item name="4" text="家族" width="36" height="18"/>
                    <!--<pe:tab-item name="5" text="团" width="36" height="18"/>-->
                    <!--<pe:tab-item name="6" text="全服" width="36" height="18"/>-->
                    <!--<pe:tab-item name="7" text="组" width="36" height="18"/>-->
                    <pe:tab-item name="10" text="全区" width="36" height="18"/>
                </pe:tabs>
            </div>
        </div>
    </pe:container>
    <div style="margin-top:4px;margin-bottom:24px;" width="100%" height="100%">
        <pe:custom oncreate="MyCompany.Aries.ChatSystem.ChatWindow.CreateTreeView()" style="margin-left:16px;" />
    </div>
</div>
</pe:mcml> 
</body>
</html>