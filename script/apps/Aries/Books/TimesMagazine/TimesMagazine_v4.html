<!-- "script/apps/Aries/Books/TimesMagazine/TimesMagazine_v4.html" -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>TimesMagazine, by Andy, 2009/11/24</title>
</head>
<body>
<pe:mcml>
<script type="text/npl"><![CDATA[
local pageCtrl = document:GetPageCtrl();

local ItemManager = System.Item.ItemManager;
local hasGSItem = ItemManager.IfOwnGSItem;
local equipGSItem = ItemManager.IfEquipGSItem;


function DS_Func_TimesMagazine_v3(index)
    if(index == nil) then
        return 11;
    elseif(index == 1) then
        return {background = "Texture/Aries/Books/TimesMagazine_v4/1.png",
            bg_Lollipop = "",
            src_iframe = "",
        };
    elseif(index == 2) then
        return {background = "Texture/Aries/Books/TimesMagazine_v4/2.png",
            bg_Lollipop = "",
            src_iframe = "",
        };
    elseif(index == 3) then
        return {background = "Texture/Aries/Books/TimesMagazine_v4/3.png",
            bg_Lollipop = "",
            src_iframe = "",
        };
    elseif(index == 4) then
        return {background = "Texture/Aries/Books/TimesMagazine_v4/4.png",
            bg_Lollipop = "",
            src_iframe = "",
        };
    elseif(index == 5) then
        return {background = "Texture/Aries/Books/TimesMagazine_v4/5.png",
            bg_Lollipop = "",
            src_iframe = "",
        };
    elseif(index == 6) then
        return {background = "Texture/Aries/Books/TimesMagazine_v4/6.png",
            bg_Lollipop = "",
            src_iframe = "",
        };
    elseif(index == 7) then
        return {background = "Texture/Aries/Books/TimesMagazine_v4/7.png",
            bg_Lollipop = "",
            src_iframe = "",
        };
    elseif(index == 8) then
        return {background = "Texture/Aries/Books/TimesMagazine_v4/8.png",
            bg_Lollipop = "",
            src_iframe = "",
        };
    elseif(index == 9) then
        return {background = "Texture/Aries/Books/TimesMagazine_v4/9.png",
            bg_Lollipop = "",
            src_iframe = "",
        };
    elseif(index == 10) then
        return {background = "Texture/Aries/Books/TimesMagazine_v4/10.png",
            bg_Lollipop = "",
            src_iframe = "",
        };
    elseif(index == 11) then
        return {background = "Texture/Aries/Books/TimesMagazine_v4/11.png",
            bg_Lollipop = "",
            src_iframe = "",
        };
    end
end
function Confirm()

	local msg = { aries_type = "OnCloseTimeMagazine", wndName = "main"};
	CommonCtrl.os.hook.Invoke(CommonCtrl.os.hook.HookType.WH_CALLWNDPROCRET, 0, "Aries", msg);
	
    pageCtrl:CloseWindow();
end

function GoTo(index)
    if(index) then
        index = tonumber(index);
        pageCtrl:CallMethod("TimesMagazine_v3", "GotoPage", index);
    end
end

function OnWriteToRod()
    --pageCtrl:CloseWindow();
    
    NPL.load("(gl)script/kids/3DMapSystemUI/PENote/Pages/LiteMailPage.lua");
    Map3DSystem.App.PENote.LiteMailPage.ShowPage(1);
end

function OnWriteSomeSecret()
    --pageCtrl:CloseWindow();
    
    NPL.load("(gl)script/kids/3DMapSystemUI/PENote/Pages/LiteMailPage.lua");
    Map3DSystem.App.PENote.LiteMailPage.ShowPage(2);
end


]]></script>

<div style="width:1020px;height:680px;padding-left:100px;padding-top:64px;padding-bottom:-10px;background:url(Texture/Aries/Books/Magazine_bg_11_19_32bits.png#0 0 1020 680);">
    <pe:gridview DataSource="<%=DS_Func_TimesMagazine_v3%>" name="TimesMagazine_v3" 
        VerticalScrollBarStep="30" CellPadding="0"  DefaultNodeHeight = "512" ItemsPerLine="1" AllowPaging="true" pagesize="1">
        <Columns>
            <div style="width:1024px;height:512px">
                <img src='<%=Eval("background")%>' style="margin-left:-100px;margin-top:16px;width:1024px;height:512px;" />
                <div style="margin-top:-512px;width:848px;height:542px">
                    <pe:if condition='<%=Eval("index") == 1%>'>
                        <div style="position:relative;margin-left:63px;margin-top:179px;width:256px;height:128px;background:url()">
                            <a tooltip="招募医生啦（A2-A3）" style="width:150px;height:24px;background:url(Texture/Aries/Books/TimesMagazine_v3/arrow_32bits.png#4 4 24 24: 22 1 1 1)" name="A2" onclick="GoTo" param1='2'><div style="width:120px;height:24px;"/></a>
                        </div>
                        <div style="position:relative;margin-left:63px;margin-top:200px;width:256px;height:128px;background:url()">
                            <a tooltip="龙龙乐园乐趣多（A4）" style="width:150px;height:24px;background:url(Texture/Aries/Books/TimesMagazine_v3/arrow_32bits.png#4 4 24 24: 22 1 1 1)" name="A2" onclick="GoTo" param1='4'><div style="width:120px;height:24px;"/></a>
                        </div>
                        <div style="position:relative;margin-left:63px;margin-top:221px;width:256px;height:128px;background:url()">
                            <a tooltip="海滨日光站（A5）" style="width:150px;height:24px;background:url(Texture/Aries/Books/TimesMagazine_v3/arrow_32bits.png#4 4 24 24: 22 1 1 1)" name="A2" onclick="GoTo" param1='5'><div style="width:120px;height:24px;"/></a>
                        </div>
                        <div style="position:relative;margin-left:63px;margin-top:242px;width:256px;height:128px;background:url()">
                            <a tooltip="跳蚤鸡爱吃虫（A6）" style="width:150px;height:24px;background:url(Texture/Aries/Books/TimesMagazine_v3/arrow_32bits.png#4 4 24 24: 22 1 1 1)" name="A2" onclick="GoTo" param1='6'><div style="width:120px;height:24px;"/></a>
                        </div>
                        <div style="position:relative;margin-left:63px;margin-top:262px;width:256px;height:128px;background:url()">
                            <a tooltip="镇长信箱（A7）" style="width:150px;height:24px;background:url(Texture/Aries/Books/TimesMagazine_v3/arrow_32bits.png#4 4 24 24: 22 1 1 1)" name="A2" onclick="GoTo" param1='7'><div style="width:120px;height:24px;"/></a>
                        </div>
                        <div style="position:relative;margin-left:63px;margin-top:284px;width:256px;height:128px;background:url()">
                            <a tooltip="宠物小档案（A8-A9）" style="width:150px;height:24px;background:url(Texture/Aries/Books/TimesMagazine_v3/arrow_32bits.png#4 4 24 24: 22 1 1 1)" name="A2" onclick="GoTo" param1='8'><div style="width:120px;height:24px;"/></a>
                        </div>
                        <div style="position:relative;margin-left:63px;margin-top:303px;width:256px;height:128px;background:url()">
                            <a tooltip="镇里的小秘密（A10）" style="width:150px;height:24px;background:url(Texture/Aries/Books/TimesMagazine_v3/arrow_32bits.png#4 4 24 24: 22 1 1 1)" name="A2" onclick="GoTo" param1='10'><div style="width:120px;height:24px;"/></a>
                        </div>
                        <div style="position:relative;margin-left:63px;margin-top:325px;width:256px;height:128px;background:url()">
                            <a tooltip="精彩预告（A11）" style="width:150px;height:24px;background:url(Texture/Aries/Books/TimesMagazine_v3/arrow_32bits.png#4 4 24 24: 22 1 1 1)" name="A2" onclick="GoTo" param1='11'><div style="width:120px;height:24px;"/></a>
                        </div>
                    </pe:if>
                    <pe:if condition='<%=Eval("index") == 7%>'>
                        <input type="button" animstyle="23" style="margin-left:436px;margin-top:425px;width:64px;height:64px;background:url(Texture/Aries/Books/TimesMagazine_v3/MailRod_32bits.png)" tooltip="给罗德镇长写信" onclick="OnWriteToRod()"/>
                    </pe:if>
                    <pe:if condition='<%=Eval("index") == 10%>'>
                        <input type="button" animstyle="23" style="margin-left:91px;margin-top:409px;width:64px;height:64px;background:url(Texture/Aries/Books/TimesMagazine_v3/MailRod_32bits.png)" tooltip="写信告诉帕帕" onclick="OnWriteSomeSecret()"/>
                    </pe:if>
                </div>
            </div>
        </Columns>
        <EmptyDataTemplate>
            Empty
        </EmptyDataTemplate>
        <FetchingDataTemplate>
            Searching...
        </FetchingDataTemplate>
	    <PagerSettings Position="Bottom" height="64" style="margin-left:90px;margin-top:-200px;width:168px;height:64px;" PreviousPageText="previous page" NextPageText="next page"/>
	    <PagerTemplate>
	        <form>
	            <input type="button" name="pre" invisibleondisabled="true" zorder=2 animstyle="23" tooltip="上一页" style="margin-left:-16px;margin-top:124px;width:48px;height:48px;background:url(Texture/Aries/Books/previous_32bits.png# 8 8 48 48);"/>
	            <input type="button" name="next" invisibleondisabled="true" zorder=2 animstyle="23" tooltip="下一页" style="margin-left:728px;margin-top:154px;width:48px;height:48px;background:url(Texture/Aries/Books/next_32bits.png# 8 8 48 48);"/>
	        </form>
	    </PagerTemplate>
    </pe:gridview>
    <input type="button" onclick="Confirm()" zorder="2" style="margin-left:838px;margin-top:-640px;width:32px;height:32px;background:Texture/Aries/Books/close_11_20_32bits.png;"/>
</div>

</pe:mcml> 
</body>
</html>